<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Courses</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body { font-family:'Segoe UI',sans-serif; background:#f0f2f5; margin:0; }
.navbar { background:#1f3c88; color:#fff; }
.navbar a { color:#fff; text-decoration:none; margin-right:15px; }
.container { margin-top:30px; }
.card { margin-bottom:20px; }
</style>
</head>
<body>
<nav class="navbar navbar-expand-lg p-3">
  <a href="#" class="navbar-brand"><i class="fas fa-graduation-cap"></i> My Courses</a>
  <a href="student_dashboard.html">Dashboard</a>
  <a href="student_mock_tests.html">Mock Tests</a>
  <a href="#" onclick="logout()">Logout</a>
</nav>

<div class="container">
  <h3>Available Courses</h3>
  <div id="coursesContainer"></div>
</div>

<script>
// Mock student login
const currentStudentId = 1;

// Load localStorage
let students = JSON.parse(localStorage.getItem('students')) || [];
let courses = JSON.parse(localStorage.getItem('courses')) || [];
let studentCourses = JSON.parse(localStorage.getItem('studentCourses')) || {}; // { studentId: [courseIds] }

// Ensure current student has an array
if(!studentCourses[currentStudentId]) studentCourses[currentStudentId] = [];

// Render courses
function renderCourses() {
  const container = document.getElementById('coursesContainer');
  container.innerHTML = '';

  if(courses.length === 0){
    container.innerHTML = "<p>No courses available.</p>";
    return;
  }

  courses.forEach(course => {
    const selected = studentCourses[currentStudentId].includes(course.id);
    const card = document.createElement('div');
    card.classList.add('card', 'p-3');
    card.innerHTML = `
      <h5>${course.name}</h5>
      <p>${course.description || ''}</p>
      <button class="btn ${selected ? 'btn-danger' : 'btn-primary'}" onclick="toggleCourse(${course.id})">
        ${selected ? 'Remove' : 'Add'}
      </button>
    `;
    container.appendChild(card);
  });
}

// Add/remove course for student
function toggleCourse(courseId){
  const index = studentCourses[currentStudentId].indexOf(courseId);
  if(index > -1){
    studentCourses[currentStudentId].splice(index,1); // remove
  } else {
    studentCourses[currentStudentId].push(courseId); // add
  }
  localStorage.setItem('studentCourses', JSON.stringify(studentCourses));
  renderCourses();
}

// Logout
function logout(){
  alert('Logged out!');
  window.location.href="student_login.html";
}

// Initial render
renderCourses();
</script>
</body>
</html>
